<extension implements="::fwServices::registry::AppConfig">
    <id>VRRenderBase</id>
    <parameters>
        <param name="appName" />
        <param name="appIconPath" />
    </parameters>
    <config>
        <object uid="seriesDB" type="::fwMedData::SeriesDB">

            <service uid="action_open" type="::fwGui::IActionSrv" impl="::uiIO::action::SSeriesDBMerger">
                <IOSelectorSrvConfig name="SDBAtomsReaderIOSelectorConfig" />
            </service>
            <service uid="action_save" type="::fwGui::IActionSrv" impl="::gui::action::SStarter">
                <start uid="SDBWriter" />
            </service>
            <service uid="SDBWriter" type="::gui::editor::IDialogEditor" impl="::uiIO::editor::SIOSelector">
                <type mode="writer" />
                <selection mode="include" />
                <addSelection service="::ioAtoms::SWriter" />
                <config id="MDAtomsConfig" service="::ioAtoms::SWriter" />
            </service>

            <service uid="mainFrame" type="::fwGui::IFrameSrv" impl="::gui::frame::SDefaultFrame">
                <gui>
                    <frame>
                        <name>${appName}</name>
                        <icon>${appIconPath}</icon>
                        <minSize width="800" height="600" />
                    </frame>
                    <menuBar />
                </gui>
                <registry>
                    <menuBar sid="menuBar" start="yes" />
                    <view sid="dynamicView" start="yes" />
                </registry>
            </service>

            <service uid="menuBar" type="::fwGui::IMenuBarSrv" impl="::gui::aspect::SDefaultMenuBar">
                <gui>
                    <layout>
                        <menu name="File" />
                        <menu name="Monitor" />
                        <menu name="Help" />
                    </layout>
                </gui>
                <registry>
                    <menu sid="menu_file" start="yes" />
                    <menu sid="menu_help" start="yes" />
                </registry>
            </service>

            <service uid="menu_file" type="::fwGui::IMenuSrv" impl="::gui::aspect::SDefaultMenu">
                <gui>
                    <layout>
                        <menuItem name="Open" shortcut="Ctrl+O" />
                        <menuItem name="Save" shortcut="Ctrl+S" />
                        <menuItem name="Quit" specialAction="QUIT" shortcut="Ctrl+Q" />
                    </layout>
                </gui>
                <registry>
                    <menuItem sid="action_open" start="yes" />
                    <menuItem sid="action_save" start="yes" />
                    <menuItem sid="action_quit" start="yes" />
                </registry>
            </service>

            <service uid="menu_help" type="::fwGui::IMenuSrv" impl="::gui::aspect::SDefaultMenu">
                <gui>
                    <layout>
                        <menuItem name="About" specialAction="ABOUT" />
                        <menuItem name="Acknowledgments" />
                        <separator />
                        <menuItem name="VR-Render Website" />
                    </layout>
                </gui>
                <registry>
                    <menuItem sid="action_about" start="yes" />
                    <menuItem sid="action_acknowledgments" start="yes" />
                    <menuItem sid="action_openBrowser" start="yes" />
                </registry>
            </service>

            <service uid="action_quit" type="::fwGui::IActionSrv" impl="::gui::action::SQuit" />

            <service uid="action_about" type="::fwGui::IActionSrv" impl="::uiGeneric::action::SShowAbout">
                <filename id="Bundles/VRRender_0-9/about/about.html" />
            </service>

            <service uid="action_acknowledgments" type="::fwGui::IActionSrv" impl="::uiGeneric::action::ShowAcknowledgments">
                <filename id="Bundles/VRRender_0-9/documentations/ack.html" />
            </service>

            <service uid="action_openBrowser" type="::fwGui::IActionSrv" impl="::uiGeneric::action::LaunchBrowserActionService">
                <url>http://www.ircad.fr/softwares/vr-render/Software.php</url>
            </service>

            <service uid="dynamicView" type="::gui::view::IView" impl="::guiQt::editor::SDynamicView" autoConnect="yes">
                <mainActivity id="SDBVRRender" closable="false" />
                <parameters>
                    <parameter replace="SERIESDB" by="seriesDB" />
                    <parameter replace="ICON_PATH" by="${appIconPath}" />
                    <parameter replace="DYNAMICVIEW_CHANNEL" by="dynamicView" />
                    <parameter replace="PROGRESS_CHANNEL" by="progressStatus" />
                </parameters>
            </service>

            <service uid="progress_statusbar" impl="::gui::editor::SJobBar" />

            <proxy channel="progressStatus">
                <signal>SDBWriter/jobCreated</signal>
                <slot>progress_statusbar/showJob</slot>
            </proxy>

            <proxy channel="dynamicView">
                <slot>dynamicView/createTab</slot>
            </proxy>

            <start uid="mainFrame" />
            <start uid="progress_statusbar" />
        </object>

    </config>
</extension>
